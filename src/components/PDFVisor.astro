---
const { id, link } = Astro.props;
---

<div
  id={`${id}`}
  class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 hidden"
>
  <div
    class="bg-white w-11/12 md:w-3/4 h-4/5 rounded-lg shadow-lg overflow-hidden relative"
  >
    <iframe src={link} class="w-full h-full"></iframe>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        document.querySelectorAll("[id^='modal-']").forEach((modal) => {
          modal.classList.add("hidden");
        });
      }
    });
    document.querySelectorAll("[id^='modal-']").forEach((modal) => {
      modal.addEventListener("click", (e) => {
        const content = modal.querySelector("div"); // Contenedor del iframe
        if (content && !content.contains(e.target as Node)) {
          modal.classList.add("hidden");
        }
      });
    });
  });
</script>
